# 功能特性

## 项目核心功能

本项目实现了四个核心功能模块：

### 1. 🌐 Web前端页面
- **Vue 3 + TypeScript** 构建的现代化Web界面
- **响应式设计**，支持桌面端和移动端访问
- **图片上传、处理、对比展示**等完整用户体验
- **批量处理**和**单张处理**两种模式

### 2. 🔄 GFPGAN面部增强API中转服务
- **API网关服务**：为微信小程序提供HTTPS接口
- **GPU服务器代理**：真正的GFPGAN API部署在GPU服务器上
- **域名合规**：解决微信小程序对API域名的HTTPS和备案要求
- **中转调用**：通过当前服务器进行API中转，满足小程序合规要求

### 3. 💳 微信小程序"喵喵美颜"支付后端
- **完整的微信支付API**：订单创建、支付回调、订单查询
- **用户认证**：微信登录openid获取
- **订单管理**：本地订单存储和状态跟踪
- **支付统计**：订单数据分析和统计功能

### 4. 🔧 多GPU服务器管理系统
- **动态服务器注册**：GPU服务器通过webhook主动注册IP地址
- **负载均衡**：支持多台GPU服务器顺序负载均衡
- **健康检测**：自动检测GPU服务器状态，故障自动切换
- **IP动态更新**：GPU服务器IP变化时自动更新配置

## 图片处理功能

### 🖼️ 图片处理
- **多格式支持**: 支持 JPG、JPEG、AVIF 格式图片上传和增强
- **AVIF转换**: 自动将AVIF格式转换为JPG格式进行处理
- **单张处理**: 支持单张图片上传和增强
- **批量处理**: 支持同时上传多张图片进行批量增强
- **超分辨率增强**: 将低分辨率照片提升至高分辨率
- **实时进度**: 显示处理进度和状态
- **实时显示**: 批量处理时每张图片完成立即显示结果

### 📊 用户体验
- **对比展示**: 原图与处理后图片的对比显示
- **全屏查看**: 支持全屏模式查看处理结果
- **拖拽上传**: 支持拖拽文件到上传区域
- **响应式设计**: 适配各种设备屏幕

### 💾 下载功能
- **单张下载**: 支持下载单张处理后的图片
- **批量下载**: 支持一键下载所有处理完成的图片
- **真正缓存下载**: 从浏览器内存下载，避免二次服务器请求
- **分批下载**: 智能分批下载，避免浏览器阻塞
- **文件大小显示**: 显示处理后的图片大小而非原图大小

### ⚡ 性能优化
- **Base64编码优化**: 分批编码预览，解决CPU压力问题
- **并发控制**: 可配置的并发处理数量
- **内存管理**: 智能内存释放，避免内存泄漏
- **快速处理**: 单张图片处理时间约 1 分钟内
- **实时显示**: 批量处理时每张图片完成立即显示，无需等待全部完成
- **服务器图片缓存**: 处理完成后立即下载并转换为Base64存储

### 🔧 配置管理
- **统一API配置**: 集中管理服务器地址和API端点
- **动态配置**: 支持运行时修改服务器地址
- **环境适配**: 支持开发和生产环境配置
- **无硬编码**: 移除所有硬编码的IP地址和URL
- **灵活更新**: 支持多种方式动态更新后端服务地址

## 技术栈

### 前端 (Web页面)
- **Vue 3** - 渐进式 JavaScript 框架
- **Vite** - 快速的前端构建工具
- **TypeScript** - 类型安全的 JavaScript
- **Tailwind CSS** - 实用优先的 CSS 框架

### 后端服务
- **Flask** - Python Web框架 (API网关服务)
- **FastAPI** - 现代、快速的 Python Web 框架 (GPU服务器)
- **Python** - 后端开发语言
- **Nginx** - 反向代理和HTTPS支持

### 微信小程序
- **微信小程序原生开发** - "喵喵美颜"小程序
- **微信支付API** - 完整的支付流程集成
- **HTTPS API调用** - 通过API网关服务

## 界面设计

采用简洁现代的设计风格，使用 Tailwind CSS 实现响应式布局，确保在各种设备上都有良好的用户体验。
