# 批量图片处理功能

## 新增功能概述

本次更新为照片超分辨率增强应用添加了批量处理功能，用户现在可以同时上传和处理多张图片。

## 主要特性

### 1. 双模式切换
- **单张处理模式**：原有的单张图片上传和处理功能
- **批量处理模式**：新增的多张图片批量上传和处理功能

### 2. 批量上传功能
- 支持拖拽多张图片到上传区域
- 支持文件选择器多选图片
- 实时预览已选择的图片
- 文件格式和大小验证
- 可单独删除不需要的图片

### 3. 批量处理能力
- 并发处理多张图片（限制并发数为3，避免服务器压力）
- 实时显示处理进度
- 每张图片独立状态跟踪（等待中、处理中、已完成、失败）
- 处理统计信息展示

### 4. 结果管理
- 网格布局展示所有处理结果
- 原图与增强图对比显示
- 单张图片下载功能
- 批量下载所有完成的图片
- 失败图片重试功能
- 全屏查看对比功能

## 技术实现

### 新增组件

1. **BatchImageUploader.vue**
   - 批量图片上传组件
   - 支持拖拽和文件选择
   - 图片预览和管理
   - 批量处理控制

2. **BatchResultViewer.vue**
   - 批量处理结果展示组件
   - 结果统计和状态管理
   - 下载和重试功能
   - 全屏查看模态框

### API服务扩展

1. **batchEnhanceImagesAPI()**
   - 批量图片处理API
   - 并发控制（最多3张同时处理）
   - 错误处理和状态跟踪

2. **batchPollTaskResults()**
   - 批量任务状态轮询
   - 统一管理多个异步任务

### 界面改进

1. **模式切换器**
   - 美观的标签页设计
   - 平滑的切换动画
   - 状态保持和重置

2. **响应式布局**
   - 适配不同屏幕尺寸
   - 网格布局自适应
   - 移动端友好

## 使用方法

### 批量处理流程

1. **选择模式**：点击页面顶部的"批量处理"标签
2. **上传图片**：
   - 拖拽多张图片到上传区域，或
   - 点击"选择多张图片"按钮选择文件
3. **管理图片**：在预览区域查看、删除不需要的图片
4. **开始处理**：点击"开始批量处理"按钮
5. **查看结果**：在结果展示区域查看处理状态和下载图片

### 功能操作

- **单张下载**：点击结果卡片中的"下载"按钮
- **批量下载**：点击"下载全部"按钮下载所有完成的图片
- **重试失败**：点击失败图片的"重试"按钮
- **全屏查看**：点击"查看"按钮对比原图和增强图
- **重新开始**：点击"重新开始"按钮清空所有结果

## 性能优化

1. **并发控制**：限制同时处理的图片数量，避免服务器过载
2. **分块处理**：将大量图片分批处理，提高稳定性
3. **状态管理**：实时更新处理状态，提供良好的用户体验
4. **错误处理**：完善的错误捕获和用户提示

## 兼容性

- 保持与原有单张处理功能的完全兼容
- 支持所有原有的图片格式（JPG、JPEG）
- 保持相同的文件大小限制（10MB）
- 使用相同的后端API接口

## 注意事项

1. 批量处理时建议不要同时处理过多图片，以免影响服务器性能
2. 网络不稳定时建议分批处理，避免大量图片同时失败
3. 处理失败的图片可以单独重试，无需重新上传
4. 批量下载功能会按顺序下载，避免浏览器阻止多个同时下载
